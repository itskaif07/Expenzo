<div class="flex flex-col items-center py-6 px-6 w-full h-full space-y-6">
    <!-- HEADER -->
    <div class="flex items-center justify-between w-full">
        <div routerLink="/" class="flex items-center justify-center cursor-pointer border w-14 h-14 rounded-md">
            <img src="assets/back.png" alt="Back" class="w-10 opacity-90">
        </div>
        <h1 class="font-bold text-2xl">Your Expenses</h1>

        <div class="flex items-center justify-center space-x-4 text-lg font-semibold">
            @if(totalAmount != null && totalAmount > 0){
            <h1>Total: </h1>
            <h1 class="text-green-600"> ₹ {{ totalAmount }}</h1>
            }
            @else {
            <div class="w-16"></div>
            }
        </div>
    </div>

    @if (monthKeys && monthKeys.length > 0) {
    <!-- GRID -->
    <div class="w-full">
        <!-- GRID HEADER -->
        <div class="flex w-full border-gray-300 bg-[#222222] text-white">
            <div class="font-bold text-center py-3 px-2 flex-1">Subject</div>
            <div class="font-bold text-center py-3 px-2 flex-1">Amount</div>
            <div class="font-bold text-center py-3 px-2 flex-1">Date</div>
            <div class="font-bold text-center py-3 px-2 flex-1">Category</div>
            <div class="font-bold text-center py-3 px-2 flex-1">Status</div>
        </div>

        <!-- Iterate Over Monthly Data -->
        <div *ngFor="let month of monthKeys; let i = index">
            <div class="flex justify-between py-4 px-4">
                <div></div>
                <h1 class="text-center font-semibold underline">{{ monthName[i] }}</h1>
                <h1 class="font-semibold text-green-600">₹ {{ monthlyAmount[formatMonthKey(month)] || 0 }}</h1>
            </div>

            <div *ngFor="let expense of monthlyData[month]" [routerLink]="['/expense-details', expense.id]">
                <div
                    class="flex py-3 relative w-full font-medium mt-2 border-[1px] border-[#111111] group hover:bg-gray-400 transition-all ease-out hover:text-white cursor-pointer">
                    <div class="text-center py-1 px-2 flex-1 border-r-[1px] border-[#222222] group-hover:text-white">
                        {{ expense.name || '' }}
                    </div>
                    <div
                        class="text-center py-1 px-2 flex-1 border-r-[1px] border-[#222222] text-green-600 group-hover:text-white">
                        ₹ {{ expense.amount || 0 }}
                    </div>
                    <div class="text-center py-1 px-2 flex-1 border-r-[1px] border-[#222222]">
                        {{ expense.date | date: 'dd-MM-yyyy' }}
                    </div>
                    <div class="text-center py-1 px-2 flex-1 border-r-[1px] border-[#222222]">
                        {{ expense.category }}
                    </div>
                    <div class="text-center py-1 px-2 flex-1 border-[#222222] group-hover:text-white"
                        [ngClass]="{'text-green-600': expense.status === 'Paid', 'text-amber-600': expense.status === 'Pending'}">
                        {{ expense.status }}
                    </div>
                </div>
            </div>
        </div>
    </div>
    }
    @else {
    <div class="flex items-center justify-center h-[60vh] w-full">
        <h1 class="font-semibold text-xl text-center">No expenses yet.</h1>
    </div>
    }
</div>